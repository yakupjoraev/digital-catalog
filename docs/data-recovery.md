# üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ 8 —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∞ —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ 30+ –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å—á–µ–∑–∞—é—Ç.

## –ü—Ä–∏—á–∏–Ω—ã

1. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–∏—â–µ–Ω–∞
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** - —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥** - seed —Å–∫—Ä–∏–ø—Ç –æ—á–∏—â–∞–µ—Ç –±–∞–∑—É –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

## –†–µ—à–µ–Ω–∏–µ

### üöÄ –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd back
npm run restore-all
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã
- –ó–∞–≥—Ä—É–∑–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –±–∞–∑–∞ –ø—É—Å—Ç–∞)
- –ó–∞–≥—Ä—É–∑–∏—Ç —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–∫–∞–∂–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### üìã –ü–æ—à–∞–≥–æ–≤–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**

```bash
cd back
npm run db:seed
```

2. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**

```bash
cd back
npm run load-parsed
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**

```bash
cd back
npx prisma studio --port 5555
```

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –±–∞–∑–µ:**

```bash
cd back
npm run check-users  # –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã:**

```bash
cd back
npx prisma studio --port 5555
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–µ—Å—Ç–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã (8 —à—Ç.)

- –ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã
- –°–∫–≤–µ—Ä –∏–º–µ–Ω–∏ –ì–∞–≥–∞—Ä–∏–Ω–∞
- –î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞ "–°–æ–ª–Ω—ã—à–∫–æ"
- –ù–∞–±–µ—Ä–µ–∂–Ω–∞—è 62-–π –ê—Ä–º–∏–∏
- –°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ "–û–ª–∏–º–ø"
- –ü–ª–æ—â–∞–¥—å –ü–∞–≤—à–∏—Ö –ë–æ—Ä—Ü–æ–≤
- –§–æ–Ω—Ç–∞–Ω "–ò—Å–∫—É—Å—Å—Ç–≤–æ"
- –°–∫–≤–µ—Ä –ú–µ—Ç–∞–ª–ª—É—Ä–≥–æ–≤

### –°–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (21+ —à—Ç.)

- –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ `parser/data/output/final_full_objects_1748251911697.json`
- –†–µ–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –±–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –í–æ–ª–≥–æ–≥—Ä–∞–¥–∞
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –°–∫—Ä–∏–ø—Ç fullRestore.ts

```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
if (currentCount === 0) {
  // –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
  await seedData();
  await loadParsedData();
} else if (currentCount < 20) {
  // –ß–∞—Å—Ç–∏—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
  await loadParsedData();
}
```

### –ö–æ–º–∞–Ω–¥—ã npm

```json
{
  "scripts": {
    "db:seed": "prisma db seed",           // –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    "load-parsed": "ts-node src/scripts/loadParsedData.ts", // –¢–æ–ª—å–∫–æ —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ
    "restore-all": "ts-node src/scripts/fullRestore.ts",    // –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
    "db:studio": "prisma studio"          // –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–∑—ã
  }
}
```

## –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
cp back/prisma/dev.db back/prisma/dev.db.backup

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∫–æ–ø–∏–∏
cp back/prisma/dev.db.backup back/prisma/dev.db
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
cd back
npx prisma db execute --stdin <<< "SELECT COUNT(*) FROM objects;"
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

–î–æ–±–∞–≤–∏—Ç—å –≤ `src/index.ts`:

```typescript
import fullRestore from './scripts/fullRestore';

// –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
app.listen(PORT, async () => {
  console.log(`Server running on port ${PORT}`);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
  const objectCount = await prisma.object.count();
  if (objectCount < 20) {
    console.log('üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ...');
    await fullRestore();
  }
});
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```typescript
// GET /api/objects/stats
{
  "total": 29,
  "byType": {
    "PARK": 15,
    "SQUARE": 8,
    "PLAYGROUND": 3,
    "EMBANKMENT": 1,
    "FOUNTAIN": 1,
    "MONUMENT": 1
  },
  "byDistrict": {
    "CENTRAL": 12,
    "SOVETSKY": 5,
    "DZERZHINSKY": 4,
    // ...
  }
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
console.log(`üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç ${count} –æ–±—ä–µ–∫—Ç–æ–≤`);
if (count < 20) {
  console.warn('‚ö†Ô∏è  –ú–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ, –≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ');
}
```

## –î–ª—è –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

1. **–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É:**

   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—É—Å—Ç–æ–π –±–∞–∑–æ–π
   - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ 8 —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

2. **–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ:**

   ```bash
   npm run restore-all
   ```

   - –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É 29 –æ–±—ä–µ–∫—Ç–æ–≤

3. **–û–±—ä—è—Å–Ω–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:**
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
   - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ–≥–æ
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —á–∞—Å—Ç—è–º
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã

---

**–ò—Ç–æ–≥:** –¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –ª—é–±–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ 29 –æ–±—ä–µ–∫—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `npm run restore-all`.
