# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - SQLite —Å Prisma

## üóÑÔ∏è –í—ã–±–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–¶–∏—Ñ—Ä–æ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –æ–±—ä–µ–∫—Ç–æ–≤ –±–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –í–æ–ª–≥–æ–≥—Ä–∞–¥–∞" –≤—ã–±—Ä–∞–Ω–∞ **SQLite** —Å **Prisma ORM** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ SQLite + Prisma –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - —Ñ–∞–π–ª–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞
2. **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - –≤—Å—è –±–∞–∑–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `dev.db`
3. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è TypeScript —Ç–∏–ø–æ–≤
4. **Prisma Studio** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
5. **–ú–∏–≥—Ä–∞—Ü–∏–∏** - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
6. **–û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∏ —Å—Ä–µ–¥–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
7. **–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –¥–∏–ø–ª–æ–º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
8. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–≤–∞–∂–Ω–æ –¥–ª—è –†–æ—Å—Å–∏–∏)

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ Prisma (`back/prisma/schema.prisma`)

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Object {
  id          String   @id @default(cuid())
  name        String
  type        String   // "PARK", "SQUARE", "PLAYGROUND", etc.
  district    String   // "CENTRAL", "DZERZHINSKY", etc.
  address     String
  description String
  photos      String   // JSON string array
  yearBuilt   Int?
  latitude    Float
  longitude   Float
  status      String   @default("ACTIVE") // "ACTIVE", "UNDER_CONSTRUCTION", etc.
  source      String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("objects")
}

model User {
  id        String   @id @default(cuid())
  username  String   @unique
  email     String   @unique
  password  String
  role      String   @default("USER") // "ADMIN", "USER"
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ö–µ–º—ã

**–ü–æ—á–µ–º—É —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ enum:**

- SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç enum —Ç–∏–ø—ã
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤ –∫–æ–¥–µ
- –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å—Ö–µ–º—É –∏ –¥–µ–ª–∞–µ—Ç –µ—ë –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π

**–ü–æ—á–µ–º—É photos –∫–∞–∫ String:**

- SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤—ã –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤
- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ JSON —Å—Ç—Ä–æ–∫–∞: `'["url1.jpg", "url2.jpg"]'`
- –í –∫–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å—è—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

#### ObjectType (–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤):

- `PARK` - –ø–∞—Ä–∫
- `SQUARE` - —Å–∫–≤–µ—Ä
- `PLAYGROUND` - –¥–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞
- `SPORTS_GROUND` - —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞
- `EMBANKMENT` - –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è
- `BOULEVARD` - –±—É–ª—å–≤–∞—Ä
- `PLAZA` - –ø–ª–æ—â–∞–¥—å
- `FOUNTAIN` - —Ñ–æ–Ω—Ç–∞–Ω
- `MONUMENT` - –ø–∞–º—è—Ç–Ω–∏–∫
- `BUS_STOP` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- `OTHER` - –¥—Ä—É–≥–æ–µ

#### District (–†–∞–π–æ–Ω—ã –í–æ–ª–≥–æ–≥—Ä–∞–¥–∞):

- `CENTRAL` - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π
- `DZERZHINSKY` - –î–∑–µ—Ä–∂–∏–Ω—Å–∫–∏–π
- `VOROSHILOVSKY` - –í–æ—Ä–æ—à–∏–ª–æ–≤—Å–∫–∏–π
- `SOVETSKY` - –°–æ–≤–µ—Ç—Å–∫–∏–π
- `TRAKTOROZAVODSKY` - –¢—Ä–∞–∫—Ç–æ—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∏–π
- `KRASNOARMEYSKY` - –ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–∏–π
- `KIROVSKY` - –ö–∏—Ä–æ–≤—Å–∫–∏–π
- `KRASNOOKTYABRSKY` - –ö—Ä–∞—Å–Ω–æ–æ–∫—Ç—è–±—Ä—å—Å–∫–∏–π

#### ObjectStatus (–°—Ç–∞—Ç—É—Å—ã):

- `ACTIVE` - –∞–∫—Ç–∏–≤–Ω—ã–π
- `UNDER_CONSTRUCTION` - –Ω–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `PLANNED` - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- `CLOSED` - –∑–∞–∫—Ä—ã—Ç

#### UserRole (–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):

- `ADMIN` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- `USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `back/.env`:

```env
DATABASE_URL="file:./dev.db"
JWT_SECRET=your_super_secret_jwt_key_for_digital_catalog_volgograd_2024
PORT=5000
NODE_ENV=development
FRONTEND_URL=http://localhost:5173
```

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Prisma

```bash
cd back

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npm run db:generate

# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
npm run db:push

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npx ts-node src/scripts/seed.ts
```

### 3. Prisma Studio

–î–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏:

```bash
npm run db:studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:5555

## üîç –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ Prisma

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```typescript
const objects = await prisma.object.findMany({
  orderBy: { createdAt: 'desc' }
});
```

### –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–π–æ–Ω—É:

```typescript
const objects = await prisma.object.findMany({
  where: {
    district: 'CENTRAL'
  }
});
```

### –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫:

```typescript
const objects = await prisma.object.findMany({
  where: {
    OR: [
      { name: { contains: '–ü–∞—Ä–∫' } },
      { description: { contains: '–ü–∞—Ä–∫' } },
      { address: { contains: '–ü–∞—Ä–∫' } }
    ]
  }
});
```

### –ü–æ–∏—Å–∫ —Ä—è–¥–æ–º —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏:

```typescript
const latitude = 48.7080;
const longitude = 44.5133;
const range = 0.01; // –ø—Ä–∏–º–µ—Ä–Ω–æ 1 –∫–º

const objects = await prisma.object.findMany({
  where: {
    latitude: {
      gte: latitude - range,
      lte: latitude + range
    },
    longitude: {
      gte: longitude - range,
      lte: longitude + range
    }
  }
});
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞–π–æ–Ω–∞–º:

```typescript
const stats = await prisma.object.groupBy({
  by: ['district'],
  _count: { district: true }
});
```

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:

```typescript
const newObject = await prisma.object.create({
  data: {
    name: '–ù–æ–≤—ã–π –ø–∞—Ä–∫',
    type: 'PARK',
    district: 'CENTRAL',
    address: '—É–ª. –ù–æ–≤–∞—è, 1',
    description: '–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∫–∞',
    photos: JSON.stringify(['https://example.com/photo.jpg']),
    latitude: 48.7080,
    longitude: 44.5133,
    status: 'ACTIVE',
    source: '–†—É—á–Ω–æ–π –≤–≤–æ–¥'
  }
});
```

## üöÄ –†–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è seed —Å–∫—Ä–∏–ø—Ç–∞ –≤ –±–∞–∑–µ –±—É–¥–µ—Ç:

### –û–±—ä–µ–∫—Ç—ã (8 —à—Ç—É–∫):

1. **–ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã** (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: PARK
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.708, 44.5133
   - –ì–æ–¥: 1975
   - –°—Ç–∞—Ç—É—Å: ACTIVE

2. **–°–∫–≤–µ—Ä –∏–º–µ–Ω–∏ –ì–∞–≥–∞—Ä–∏–Ω–∞** (–î–∑–µ—Ä–∂–∏–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: SQUARE
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.7194, 44.5267
   - –ì–æ–¥: 1961
   - –°—Ç–∞—Ç—É—Å: ACTIVE

3. **–î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞ "–°–æ–ª–Ω—ã—à–∫–æ"** (–í–æ—Ä–æ—à–∏–ª–æ–≤—Å–∫–∏–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: PLAYGROUND
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.735, 44.545
   - –ì–æ–¥: 2020
   - –°—Ç–∞—Ç—É—Å: ACTIVE

4. **–ù–∞–±–µ—Ä–µ–∂–Ω–∞—è 62-–π –ê—Ä–º–∏–∏** (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: EMBANKMENT
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.7071, 44.5152
   - –ì–æ–¥: 1952
   - –°—Ç–∞—Ç—É—Å: UNDER_CONSTRUCTION

5. **–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ "–û–ª–∏–º–ø"** (–°–æ–≤–µ—Ç—Å–∫–∏–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: SPORTS_GROUND
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.75, 44.52
   - –ì–æ–¥: 2018
   - –°—Ç–∞—Ç—É—Å: ACTIVE

6. **–ü–ª–æ—â–∞–¥—å –ü–∞–≤—à–∏—Ö –ë–æ—Ä—Ü–æ–≤** (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: PLAZA
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.7067, 44.5175
   - –ì–æ–¥: 1963
   - –°—Ç–∞—Ç—É—Å: ACTIVE

7. **–§–æ–Ω—Ç–∞–Ω "–ò—Å–∫—É—Å—Å—Ç–≤–æ"** (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω)

   - –¢–∏–ø: FOUNTAIN
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.71, 44.518
   - –ì–æ–¥: 2010
   - –°—Ç–∞—Ç—É—Å: PLANNED

8. **–°–∫–≤–µ—Ä –ú–µ—Ç–∞–ª–ª—É—Ä–≥–æ–≤** (–ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω)
   - –¢–∏–ø: SQUARE
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 48.68, 44.49
   - –ì–æ–¥: 1985
   - –°—Ç–∞—Ç—É—Å: ACTIVE

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: admin@volgograd.ru / admin123 (–ø–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω bcrypt)

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏–∑ API:

```json
{
  "id": "cmb3wkipt0000zjlm2yamr2s6",
  "name": "–ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã",
  "type": "PARK",
  "district": "CENTRAL",
  "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 1",
  "description": "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∫ –≥–æ—Ä–æ–¥–∞ —Å –º–µ–º–æ—Ä–∏–∞–ª–æ–º –≤–æ–∏–Ω–∞–º –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã. –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∞–ª–ª–µ–∏, —Ñ–æ–Ω—Ç–∞–Ω—ã, –¥–µ—Ç—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∫–∏ –∏ –∑–æ–Ω—ã –æ—Ç–¥—ã—Ö–∞.",
  "photos": [
    "https://example.com/park-pobedy-1.jpg",
    "https://example.com/park-pobedy-2.jpg"
  ],
  "yearBuilt": 1975,
  "latitude": 48.708,
  "longitude": 44.5133,
  "status": "ACTIVE",
  "source": "–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ",
  "createdAt": "2025-05-25T16:58:39.425Z",
  "updatedAt": "2025-05-25T16:58:39.425Z",
  "coordinates": {
    "lat": 48.708,
    "lng": 44.5133
  }
}
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `back/prisma/schema.prisma`
2. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
# –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
npm run db:push

# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
npm run db:migrate
```

### –°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –£–¥–∞–ª–∏—Ç—å –±–∞–∑—É –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
rm back/dev.db
npm run db:push
npx ts-node src/scripts/seed.ts
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQLite CLI:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ sqlite3 –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
sqlite3 back/dev.db

# –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
.tables                    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
.schema objects           # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü—ã
SELECT * FROM objects;    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã
SELECT COUNT(*) FROM objects; # –ü–æ–¥—Å—á–µ—Ç –æ–±—ä–µ–∫—Ç–æ–≤
.exit                     # –í—ã—Ö–æ–¥
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sqlite3 back/dev.db ".schema"
sqlite3 back/dev.db "SELECT COUNT(*) FROM objects;"
sqlite3 back/dev.db "SELECT district, COUNT(*) FROM objects GROUP BY district;"

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
cp back/dev.db back/dev.db.backup

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã
ls -lh back/dev.db
```

### Prisma –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
npx prisma generate

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ö–µ–º—ã
npx prisma db pull

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã
npx prisma format

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã
npx prisma validate

# –ò–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npx prisma db pull
```

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **"Cannot find module '@prisma/client'"**

   ```bash
   cd back
   npm run db:generate
   ```

2. **"Environment variable not found: DATABASE_URL"**

   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `back/`:

   ```env
   DATABASE_URL="file:./dev.db"
   ```

3. **"Database is locked"**

   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
   pkill -f "ts-node"
   # –ò–ª–∏ –≤ Windows: Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
   ```

4. **–û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏**

   ```bash
   rm -rf back/prisma/migrations
   npm run db:push
   ```

5. **–ü—Ä–æ–±–ª–µ–º—ã —Å JSON –ø–æ–ª—è–º–∏**

   –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ JSON —Å—Ç—Ä–æ–∫–∏:

   ```typescript
   // –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
   photos: JSON.stringify(['url1.jpg', 'url2.jpg'])

   // –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏
   const photos = JSON.parse(obj.photos || '[]')
   ```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –¥–∏–ø–ª–æ–º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç  
‚úÖ **–í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - Prisma Studio –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏  
‚úÖ **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤  
‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ª–µ–≥–∫–æ –∏–∑—É—á–∏—Ç—å –∏ –æ–±—ä—è—Å–Ω–∏—Ç—å  
‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏** - –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–∑—é–º–µ  
‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - 8 –æ–±—ä–µ–∫—Ç–æ–≤ –í–æ–ª–≥–æ–≥—Ä–∞–¥–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL:

1. –ò–∑–º–µ–Ω–∏—Ç—å `provider = "postgresql"` –≤ schema.prisma
2. –û–±–Ω–æ–≤–∏—Ç—å DATABASE_URL
3. –î–æ–±–∞–≤–∏—Ç—å enum —Ç–∏–ø—ã –æ–±—Ä–∞—Ç–Ω–æ
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å `npm run db:push`

## üîç –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```sql
-- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
SELECT COUNT(*) as total_objects FROM objects;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 8

-- –ü–æ —Ä–∞–π–æ–Ω–∞–º
SELECT district, COUNT(*) as count FROM objects GROUP BY district;
-- CENTRAL: 4
-- DZERZHINSKY: 1
-- VOROSHILOVSKY: 1
-- SOVETSKY: 1
-- KRASNOARMEYSKY: 1

-- –ü–æ —Ç–∏–ø–∞–º
SELECT type, COUNT(*) as count FROM objects GROUP BY type;
-- PARK: 1
-- SQUARE: 2
-- PLAYGROUND: 1
-- EMBANKMENT: 1
-- SPORTS_GROUND: 1
-- PLAZA: 1
-- FOUNTAIN: 1

-- –ü–æ —Å—Ç–∞—Ç—É—Å–∞–º
SELECT status, COUNT(*) as count FROM objects GROUP BY status;
-- ACTIVE: 7
-- UNDER_CONSTRUCTION: 1
-- PLANNED: 1
```

---

_–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –≤—Å–µ–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏: –î–µ–∫–∞–±—Ä—å 2024_
